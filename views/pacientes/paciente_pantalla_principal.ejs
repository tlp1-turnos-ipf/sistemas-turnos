<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="resources/styles/pantalla_principal.css" />
    <link rel="stylesheet" href="resources/styles/estilo_tablas.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <title>Pantalla</title>
  </head>

  <body>
    <header class="header">
      <a
        class="navbar-brand col-lg-4 me-0 h1 text-center"
        href="./pantalla_principal.html"
        ><img
          src="resources/img/inicio_sesion/logo.png"
          class="imgLogo"
          alt=""
          width="40px"
        />San Antonio</a
      >
    </header>

    <div class="overlay"></div>

    <main>
      <section>
        <button class="burger" type="button" onclick="toggleMenu()">
          <i class="fa-solid fa-bars"></i>
          <i class="fa-solid fa-close"></i>
        </button>

        <aside>
          <a href="#">Inicio</a>
          <a href="#">Solicitud de turno</a>
          <a href="#">Lista de turnos</a>
          <a href="#">Mi Historia Clínica</a>
          <a href="#">Historial de turnos</a>
        </aside>
      </section>

      <section>
        <div class="row m-0 d-flex justify-content-center align-items-center">
          <section
            class="col-ls-6 col-lg-3 d-flex flex-wrap justify-content-center text-center"
          >
            <a href="/solicitar_turno">
              <div class="card fondo-color m-3" style="min-width: 18rem">
                <div class="card-header border-primary">
                  <img
                    src="resources/img/pantalla_principal/pacientes_dia.png"
                    alt=""
                    width="60px"
                  />
                </div>
                <div
                  class="card-body d-flex justify-content-center align-items-center"
                >
                  <h5 class="card-title text-light">Solicitar turno</h5>
                </div>
              </div>
            </a>
            <a href="./lista_turnos.html">
              <div class="card fondo-color m-3" style="min-width: 18rem">
                <div class="card-header border-primary">
                  <img
                    src="resources/img/pantalla_principal/pacientes_completos.png"
                    alt=""
                    width="60px"
                  />
                </div>
                <div
                  class="card-body d-flex justify-content-center align-items-center"
                >
                  <h5 class="card-title text-light">Lista de turnos</h5>
                </div>
              </div>
            </a>
            <a href="./historial_clinico.html">
              <div class="card fondo-color m-3" style="min-width: 18rem">
                <div class="card-header border-primary">
                  <img
                    src="resources/img/pantalla_principal/historial_pacientes.png"
                    alt=""
                    width="60px"
                  />
                </div>
                <div
                  class="card-body d-flex justify-content-center align-items-center"
                >
                  <h5 class="card-title text-light">Historia Clínica</h5>
                </div>
              </div>
            </a>
          </section>
          <section class="col-sl-10 col-lg-9">
            <div class="text-center">
              <h3 class="p-4">Turnos del Día</h3>
              <div
                class="input-group my-3 w-100 shadow p-3 mb-5 bg-body rounded border d-flex justify-content-center"
              >
                <form action="/search" method="post">
                  <div class="d-flex flex-grow">
                    <input
                      type="text"
                      id="form1"
                      name="buscar"
                      class="form-control"
                    />
                    <button type="submit" class="btn btn-primary">
                      Buscar
                    </button>
                  </div>
                </form>
              </div>

              <div class="main-table shadow mb-5 bg-body rounded border">
                <table class="table table-striped rounded">
                    <thead class="table-dark">
                        <tr>
                          <th scope="col">Nombre y Apellido</th>
                          <th scope="col">especialidad</th>
                          <th scope="col">Horario del Turno</th>
                          <th scope="col">Cancelar</th>
                        </tr>
                      </thead>
                      <tbody
                        class="d-flex-reverse align-items-center justify-content-center"
                      >
                        <% results.forEach((users) => { %>
                        <tr class="fade-in-now">
                          <td><%= users.nombres + " " + users.apellidos %></td>
                          <td><%= users.id_especialidad %></td>
                          <td><%= users.horario_turno %></td>
                          <td>
                            <a
                              href="/doctores_atender/<%= users.turnos_id %>"
                              class="btn btn-primary text-light"
                              >Cancelar turno</a
                            >
                          </td>
                         
                        </tr>
                        <% }) %>
                      </tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>

    <div class="container">
      <footer
        class="d-flex flex-wrap justify-content-between align-items-center py-1 border-top"
      >
        <span class="mb-md-0 text-body-secondary text-center"
          >© 2023 San Antonio, Centro de Atención</span
        >
      </footer>
    </div>

    <script src="../../resources/js/pantalla_principal/pantalla_principal.js"></script>

    <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <% if(typeof alert != "undefined") { %>
    <script>
      Swal.fire({
        title: "<%= alertTitle %>",
        text: "<%= alertMessage %>",
        icon: "<%= alertIcon %>",
        showConfirmButton: false,
        timer: 1500,
      }).then(() => {
        window.location = "/<%= ruta %>";
      });
    </script>
    <% } %>

    <script
      src="https://kit.fontawesome.com/553a1bb38c.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
